// 6ï¸âƒ£ ReportGenerator.demo() avec debug maximal
public with sharing class ReportGenerator {
    public static void demo() {
        System.debug('ğŸš€ === DÃ©but du demo Decorator Pattern ===');

        Opportunity opp = [
            SELECT Id, Name, Amount, CloseDate
            FROM Opportunity
            WHERE Amount != null
            LIMIT 1
        ];
        System.debug('ğŸš€ Loaded Opportunity: ' + opp);

        // Plain
        IReportFormatter plain = new DefaultReportFormatter();
        System.debug('ğŸš€ [STEP] Plain formatting');
        List<String> plainLines = plain.format(opp);
        for (String l : plainLines) {
            System.debug('ğŸ“„ Plain â†’ ' + l);
        }

        // USA
        System.debug('ğŸš€ [STEP] Wrapping with USADecorator');
        IReportFormatter usa = new USADecorator(new DefaultReportFormatter());
        List<String> usaLines = usa.format(opp);
        for (String l : usaLines) {
            System.debug('ğŸ“„ USA â†’ ' + l);
        }

        // Europe â†’ USA
        System.debug('ğŸš€ [STEP] Wrapping previous with EuropeDecorator');
        IReportFormatter euroThenUsa = new EuropeDecorator(usa);
        List<String> euroLines = euroThenUsa.format(opp);
        for (String l : euroLines) {
            System.debug('ğŸ“„ EURâ†’USA â†’ ' + l);
        }

        System.debug('ğŸš€ === Fin du demo Decorator Pattern ===');
    }
}
